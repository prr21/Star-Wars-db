(window["webpackJsonpstar-wars-db"]=window["webpackJsonpstar-wars-db"]||[]).push([[0],{25:function(e,t,n){e.exports=n.p+"static/media/death-star.098eebd8.png"},26:function(e,t,n){e.exports=n(47)},31:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(22),l=n.n(c),o=n(3),s=n(7),i=n(9),u=n(8),m=n(10),p=n(5),d=n(13),g=(n(31),function(e){var t=e.onToggleData;return r.a.createElement("div",{className:"header d-flex justify-content-between"},r.a.createElement("div",{className:"d-flex"},r.a.createElement("h3",null,r.a.createElement(p.b,{to:"/",exact:"true"},"Star DB")),r.a.createElement("ul",{className:"d-flex"},r.a.createElement("li",null," ",r.a.createElement(p.b,{to:"/people/"},"People")," "),r.a.createElement("li",null," ",r.a.createElement(p.b,{to:"/planets/"},"Planets")," "),r.a.createElement("li",null," ",r.a.createElement(p.b,{to:"/starships/"},"Starships")," "),r.a.createElement("li",null," ",r.a.createElement(p.b,{to:"/login"},"Login")," "),r.a.createElement("li",null," ",r.a.createElement(p.b,{to:"/secret"},"Secret")," "))),r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("button",{className:"btn btn-md btn-primary",onClick:t},"Change Data")))}),f=(n(37),function(){return r.a.createElement("div",{className:"lds-css ng-scope loading"},r.a.createElement("div",{style:{width:"100%",height:"100%"},className:"lds-rolling"},r.a.createElement("div",null)))}),h=(n(38),n(25)),E=n.n(h),b=function(){return r.a.createElement("div",{className:"error-wrap"},r.a.createElement("img",{src:E.a,alt:"death-star error"}),r.a.createElement("span",null,"Something Gone Wrong!"),r.a.createElement("span",null,"Sorry about that"))},v=n(1),w=n.n(v),j=n(4),O=function e(){var t=this;Object(o.a)(this,e),this._swapi="https://swapi.dev/api/",this._imageBase="https://starwars-visualguide.com/assets/img",this.getResourse=function(){var e=Object(j.a)(w.a.mark((function e(n){var a,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t._swapi+n);case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("Cannot find url ".concat(a.url,"! Code ").concat(a.status));case 5:return e.next=7,a.json();case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getPerson=function(){var e=Object(j.a)(w.a.mark((function e(n){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResourse("people/".concat(n,"/"));case 2:return a=e.sent,e.abrupt("return",t._transformPeople(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getPlanet=function(){var e=Object(j.a)(w.a.mark((function e(n){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResourse("planets/".concat(n,"/"));case 2:return a=e.sent,e.abrupt("return",t._transformPlanet(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getStarship=function(){var e=Object(j.a)(w.a.mark((function e(n){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResourse("starships/".concat(n,"/"));case 2:return a=e.sent,e.abrupt("return",t._transformShip(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getAllPeople=Object(j.a)(w.a.mark((function e(){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResourse("people/");case 2:return n=e.sent,e.abrupt("return",n.results.map(t._transformPeople));case 4:case"end":return e.stop()}}),e)}))),this.getAllPlanets=Object(j.a)(w.a.mark((function e(){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResourse("planets/");case 2:return n=e.sent,e.abrupt("return",n.results.map(t._transformPlanet));case 4:case"end":return e.stop()}}),e)}))),this.getAllStarships=Object(j.a)(w.a.mark((function e(){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResourse("starships/");case 2:return n=e.sent,e.abrupt("return",n.results.map(t._transformShip));case 4:case"end":return e.stop()}}),e)}))),this.getImagePerson=function(e){return"".concat(t._imageBase,"/characters/").concat(e,".jpg")},this.getImagePlanet=function(e){return"".concat(t._imageBase,"/planets/").concat(e,".jpg")},this.getImageStarship=function(e){return"".concat(t._imageBase,"/starships/").concat(e,".jpg")},this._extractId=function(e){return e.url.match(/\/([0-9]*)\/$/)[1]},this._transformPlanet=function(e){return{id:t._extractId(e),name:e.name,population:e.population,rotationPeriod:e.rotation_period,diameter:e.diameter,climate:e.climate}},this._transformShip=function(e){return{id:t._extractId(e),name:e.name,model:e.model,manufacturer:e.manufacturer,cost_in_credits:e.cost_in_credits,length:e.length}},this._transformPeople=function(e){return{id:t._extractId(e),name:e.name,height:e.height,mass:e.mass,hairColor:e.hair_color,skinColor:e.skin_color,eyeColor:e.eye_color,birthYear:e.birth_year,gender:e.gender}}},y=(n(40),function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).swapiResorse=new O,n.state={planet:{},loading:!0,error:!1},n.onError=function(){n.setState({loading:!1,error:!0})},n.onPlanetLoaded=function(e){n.setState({planet:e,loading:!1})},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.updateInterval;this.updatePlanet(),this.intervalId=setInterval((function(){e.updatePlanet()}),t)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalId)}},{key:"updatePlanet",value:function(){var e=Math.floor(19*Math.random())+2;this.swapiResorse.getPlanet(e).then(this.onPlanetLoaded).catch(this.onError)}},{key:"render",value:function(){var e=this.state,t=e.planet,n=e.loading,a=e.error,c=a?r.a.createElement(b,null):null,l=n?r.a.createElement(f,null):null,o=n||a?null:r.a.createElement(P,{planet:t});return r.a.createElement("div",{className:"random-planet jumbotron rounded"},c,l,o)}}]),t}(a.Component));y.defaultProps={updateInterval:1e4};var P=function(e){var t=e.planet,n=t.id,a=t.name,c=t.population,l=t.rotationPeriod,o=t.diameter;return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:"planet-image",alt:a,src:"https://starwars-visualguide.com/assets/img/planets/".concat(n,".jpg")}),r.a.createElement("div",null,r.a.createElement("h4",null,a),r.a.createElement("ul",{className:"list-group list-group-flush"},r.a.createElement("li",{className:"list-group-item"},r.a.createElement("span",{className:"term"},"Population:"),r.a.createElement("span",null,c)),r.a.createElement("li",{className:"list-group-item"},r.a.createElement("span",{className:"term"},"Rotation Period:"),r.a.createElement("span",null,l)),r.a.createElement("li",{className:"list-group-item"},r.a.createElement("span",{className:"term"},"Diameter:"),r.a.createElement("span",null,o)))))},x=y,N=(n(41),function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={hasError:!1},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidCatch",value:function(e,t){console.log(t),this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?r.a.createElement(b,null):this.props.children}}]),t}(a.Component)),k=(n(42),function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={throwError:!1},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return this.state.throwError?this.foo.bar=NaN:r.a.createElement("button",{className:"btn btn-lg btn-danger",onClick:function(){return e.setState({throwError:!0})}},"Destroy this")}}]),t}(a.Component)),I=(n(43),function(e){var t=e.data,n=e.selectedItem,a=e.children,c=t.map((function(e){var t=a(e),c=e.id;return r.a.createElement("li",{className:"list-group-item",onClick:function(){return n(c)},key:c},t)}));return r.a.createElement("ul",{className:"item-list list-group"},c)}),S=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduceRight((function(e,t){return t(e)}),e)}},_=function(e){return function(t){function n(){var e,t;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=Object(i.a)(this,(e=Object(u.a)(n)).call.apply(e,[this].concat(r)))).state={data:null,loading:!1,error:!1},t.componentDidMount=function(){t.update()},t}return Object(m.a)(n,t),Object(s.a)(n,[{key:"componentDidUpdate",value:function(e){this.props.getData!==e.getData&&(this.setState({loading:!0}),this.update())}},{key:"update",value:function(){var e=this;this.props.getData().then((function(t){e.setState({data:t,loading:!1,error:!1})})).catch((function(){e.setState({error:!0,loading:!1})}))}},{key:"render",value:function(){var t=this.state,n=t.data,a=t.loading,c=t.error;return!n||a?r.a.createElement("div",{className:"d-flex"},r.a.createElement(f,null)):c?r.a.createElement(b,null):r.a.createElement(e,Object.assign({},this.props,{data:n}))}}]),n}(a.Component)},C=r.a.createContext(),D=C.Provider,A=C.Consumer,R=function(e){return function(t){return function(n){return r.a.createElement(A,null,(function(a){var c=e(a);return r.a.createElement(t,Object.assign({},n,c))}))}}},T=function(e){return function(t){return function(n){return r.a.createElement(t,n,e)}}},L=function(e){var t=e.name;return r.a.createElement("span",null,t)},B=S(R((function(e){return{getData:e.getAllPeople}})),_,T(L))(I),W=S(R((function(e){return{getData:e.getAllPlanets}})),_,T(L))(I),U=S(R((function(e){return{getData:e.getAllStarships}})),_,T((function(e){var t=e.model,n=e.name;return r.a.createElement("span",null,n," (",t,")")})))(I),M=n(19),Y=(n(44),function(e){var t=e.item,n=e.field,a=e.label;return r.a.createElement("li",{className:"list-group-item"},r.a.createElement("span",{className:"term"},a,":"),r.a.createElement("span",null,t[n]))}),G=function(e){var t=e.itemId,n=e.getData,c=e.getImageUrl,l=e.children,o=Object(a.useState)({loading:!0,error:!1}),s=Object(M.a)(o,2),i=s[0],u=s[1],m=Object(a.useState)({imageItem:null,item:null}),p=Object(M.a)(m,2),d=p[0],g=p[1];Object(a.useEffect)((function(){f()}),[]),Object(a.useEffect)((function(){u({loading:!0,error:!1}),f()}),[t,n,c]);var f=function(){if(!t)return u({loading:!1,error:!1});n(t).then((function(e){u({loading:!1,error:!1}),g({item:e,imageItem:c(t)})})).catch((function(){u({loading:!1,error:!0})}))};return i.loading?r.a.createElement(J,null):d.item?i.error?r.a.createElement(b,null):r.a.createElement(H,{children:l,img:d.imageItem,item:d.item}):r.a.createElement(F,null)},F=function(){return r.a.createElement("div",{className:"text-center p-4 border border-secondary bg-light"},r.a.createElement("span",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u044f\u0447\u0435\u0439\u043a\u0443"))},J=function(){return r.a.createElement("div",{className:"d-flex"},r.a.createElement(f,null))},H=function(e){var t=e.item,n=e.img,a=e.children;return r.a.createElement(N,null,r.a.createElement("div",{className:"item-details card"},r.a.createElement("img",{className:"item-image",alt:t.name+" star-wars",src:n}),r.a.createElement("div",{className:"card-body"},r.a.createElement("h4",null,t.name),r.a.createElement("ul",{className:"list-group list-group-flush"},r.a.Children.map(a,(function(e){return r.a.cloneElement(e,{item:t})}))),r.a.createElement(k,null))))},V=G,$=R((function(e){return{getData:e.getPerson,getImageUrl:e.getImagePerson}}))((function(e){return r.a.createElement(V,e,r.a.createElement(Y,{field:"gender",label:"Gender"}),r.a.createElement(Y,{field:"eyeColor",label:"Eye Color"}))})),q=R((function(e){return{getData:e.getPlanet,getImageUrl:e.getImagePlanet}}))((function(e){return r.a.createElement(V,e,r.a.createElement(Y,{field:"population",label:"Population"}),r.a.createElement(Y,{field:"rotationPeriod",label:"Rotation Period"}),r.a.createElement(Y,{field:"diameter",label:"Diameter"}))})),z=R((function(e){return{getData:e.getStarship,getImageUrl:e.getImageStarship}}))((function(e){return r.a.createElement(V,e,r.a.createElement(Y,{field:"model",label:"Model"}),r.a.createElement(Y,{field:"length",label:"Length"}),r.a.createElement(Y,{field:"cost_in_credits",label:"Cost"}))})),K=(n(45),function(e){var t=e.firstWidget,n=e.secondWidget;return r.a.createElement("div",{className:"row mb-4"},r.a.createElement("div",{className:"col-md-6"},t),r.a.createElement("div",{className:"col-md-6"},n))}),Q=Object(d.g)((function(e){var t=e.match,n=e.history,a=t.params.id;return r.a.createElement(K,{firstWidget:r.a.createElement(B,{selectedItem:function(e){return n.push(e)}}),secondWidget:r.a.createElement($,{itemId:a})})})),X=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={itemId:null},n.selectedItem=function(e){n.setState({itemId:e})},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.itemId;return r.a.createElement(K,{firstWidget:r.a.createElement(W,{selectedItem:this.selectedItem}),secondWidget:r.a.createElement(q,{itemId:e})})}}]),t}(a.Component),Z=Object(d.g)((function(e){var t=e.history;return r.a.createElement(U,{selectedItem:function(e){t.push("/starships/".concat(e))}})})),ee=function(e){return e.isLogged?r.a.createElement("div",{className:"text-center mt-4 p-4 bg-success"},r.a.createElement("h2",null,"Hi there!"),r.a.createElement("p",null,"This page full of secrets! Dont tell about it to somebody...")):r.a.createElement(d.a,{to:"/login"})},te=function(e){var t=e.isLogged,n=e.login;return t?r.a.createElement(d.a,{to:"/"}):r.a.createElement("div",{className:"text-center mt-4"},r.a.createElement("p",{className:"text-warning"},"You've got to login to see a secret page!"),r.a.createElement("button",{className:"btn btn-md btn-primary",onClick:n},"Login"))},ne=function e(){var t=this;Object(o.a)(this,e),this._people=[{id:1,name:"Bilbo Baggins [TEST DATA]",gender:"male",birthYear:"long ago",eyeColor:"dark brown"},{id:2,name:"Frodo Baggins [TEST DATA]",gender:"male",birthYear:"long ago",eyeColor:"dark brown"}],this._planets=[{id:1,name:"Earth [TEST DATA]",population:"7.530.000.000",rotationPeriod:"23 hours 56 seconds",diameter:"12.742 km"},{id:2,name:"Venus [TEST DATA]",population:"not known",rotationPeriod:"243 days",diameter:"12.104 km"}],this._starships=[{id:1,name:"USS Enterprise [TEST DATA]",model:"NCC-1701-C",manufacturer:"Northrop Grumman Shipbuilding",costInCredits:"not known",length:"approx 300 meters",crew:1e3,passengers:50,cargoCapacity:100}],this.getAllPeople=Object(j.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t._people);case 1:case"end":return e.stop()}}),e)}))),this.getPerson=Object(j.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t._people[0]);case 1:case"end":return e.stop()}}),e)}))),this.getAllPlanets=Object(j.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t._planets);case 1:case"end":return e.stop()}}),e)}))),this.getPlanet=Object(j.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t._planets[0]);case 1:case"end":return e.stop()}}),e)}))),this.getAllStarships=Object(j.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t._starships);case 1:case"end":return e.stop()}}),e)}))),this.getStarship=Object(j.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t._starships[0]);case 1:case"end":return e.stop()}}),e)}))),this.getImagePerson=function(){return"https://placeimg.com/400/500/people"},this.getImagePlanet=function(){return"https://placeimg.com/400/400/nature"},this.getImageStarship=function(){return"https://placeimg.com/600/400/tech"}},ae=(n(46),function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={showRandomPlanet:!0,swapiResorse:new O,isLogged:!1},n.toggleRandomPlanet=function(){n.setState((function(e){return{showRandomPlanet:!e.showRandomPlanet}}))},n.onLogin=function(){n.setState({isLogged:!0})},n.onToggleData=function(){n.setState((function(e){return{swapiResorse:new(e.swapiResorse instanceof ne?O:ne)}}))},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.showRandomPlanet,a=t.swapiResorse,c=t.isLogged,l=n?r.a.createElement(x,null):null;return r.a.createElement(N,null,r.a.createElement(D,{value:a},r.a.createElement(p.a,null,r.a.createElement(g,{onToggleData:this.onToggleData}),l,r.a.createElement("div",{className:"row mb-2 button-row"},r.a.createElement("button",{className:"toggle-planet btn btn-warning btn-lg",onClick:this.toggleRandomPlanet},"Toggle Random Planet"),r.a.createElement(k,null)),r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/",exact:!0,render:function(){return r.a.createElement("h2",{className:"text-center mt-4"},"Welcome To Star DB Application!")}}),r.a.createElement(d.b,{path:"/people/:id?",component:Q}),r.a.createElement(d.b,{path:"/planets",component:X}),r.a.createElement(d.b,{path:"/starships",exact:!0,component:Z}),r.a.createElement(d.b,{path:"/login",exact:!0,render:function(){return r.a.createElement(te,{isLogged:c,login:e.onLogin})}}),r.a.createElement(d.b,{path:"/secret",exact:!0,render:function(){return r.a.createElement(ee,{isLogged:c})}}),r.a.createElement(d.b,{path:"/starships/:id",render:function(e){var t=e.match;return r.a.createElement(z,{itemId:t.params.id})}}),r.a.createElement(d.b,{render:function(){return r.a.createElement("div",{className:"text-center mt-4"},r.a.createElement("h3",null,"404 \u2013 page not found"))}})))))}}]),t}(a.Component));l.a.render(r.a.createElement(ae,null),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.cad338e8.chunk.js.map